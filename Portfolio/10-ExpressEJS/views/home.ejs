<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Star Lion Brewery</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/home.css">
</head>
<body>
    <%- include('partials/header') %>
    <% if (userName && userName != "") { %>
        <div id="greeting" class="alert alert-success mt-4 alert-greeting text-center" role="alert">
            <h2 class="h4 mb-0">Welcome, <%= userName %>!</h2>
        </div>
    <% } %>
    <main class="container my-5">
        <h1 class="mb-4">Welcome to Star Lion Brewery</h1>
        <p>Your one-stop destination for the finest brews and blogposts about brewing.</p>
        <section class="mt-5">
            <h2 class="mb-3">Add a New Blogpost</h2>
            <form action="/add_post" method="POST" class="mb-5 p-4 bg-white rounded shadow-sm">
                <div class="mb-3">
                    <label for="title" class="form-label">Title</label>
                    <input type="text" class="form-control" id="title" name="title" required>
                </div>
                <div class="mb-3">
                    <label for="content" class="form-label">Content</label>
                    <textarea class="form-control" id="content" name="content" rows="3" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Add Post</button>
            </form>
            <h2 class="mb-3">Latest Blogposts</h2>
            <% if (posts.length === 0) { %>
                <p>No blogposts available. Be the first to add a post!</p>
            <% } else { %>
                <% posts.forEach(function(post) { %>
                    <div class="card mb-3 position-relative">
                        <a href="/edit_post?id=<%= post.id %>" class="position-absolute top-0 end-0 m-2 text-decoration-none" title="Edit post">
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="#0d6efd" class="bi bi-pencil-square" viewBox="0 0 16 16">
                              <path d="M15.502 1.94a.5.5 0 0 1 0 .706l-1 1a.5.5 0 0 1-.708 0l-1-1a.5.5 0 0 1 .708-.708l.646.647.646-.647a.5.5 0 0 1 .708 0z"/>
                              <path d="M13.496 3.207L6.853 9.854a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.643-6.647-1.414-1.414zm-7.853 7.854a.5.5 0 0 1 .121-.196l6.643-6.647-1.414-1.414-6.643 6.647a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805z"/>
                              <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-7a.5.5 0 0 0-1 0v7a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                            </svg>
                        </a>
                        <div class="card-body">
                            <h5 class="card-title"><%= post.title %></h5>
                            <p class="card-text"><%= post.content %></p>        
                        </div>
                    </div>
                <% }); %>
            <% } %>
        </section>
    </main>
    <script>
    window.addEventListener('DOMContentLoaded', function() {
        var greeting = document.getElementById('greeting');
        if (greeting) {
            setTimeout(function() {
                greeting.classList.add('hide');
            }, 5000);
        }
    });
    </script>
    <%- include('partials/footer') %>
</body>
</html>